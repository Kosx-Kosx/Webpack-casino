import { __values } from 'tslib';
import { isPlatformBrowser } from '@angular/common';
import { Inject, PLATFORM_ID, NgModule, Optional, SkipSelf } from '@angular/core';
import { makeStateKey, TransferState } from '@angular/platform-browser';
import { CacheService } from '@ngx-cache/core';

var LocalStorageCacheService = (function () {
    function LocalStorageCacheService(platformId) {
        this.platformId = platformId;
        if (!isPlatformBrowser(platformId))
            throw new Error('LocalStorageCacheService is not supported outside `browser` platform!');
    }
    Object.defineProperty(LocalStorageCacheService.prototype, "isEnabled", {
        get: function () {
            if (!isPlatformBrowser(this.platformId))
                return false;
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                return true;
            }
            catch (e) {
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LocalStorageCacheService.prototype, "keys", {
        get: function () {
            if (!this.isEnabled)
                return undefined;
            var res = [];
            Object.keys(localStorage)
                .forEach(function (key) {
                res.push(key);
            });
            return res;
        },
        enumerable: true,
        configurable: true
    });
    LocalStorageCacheService.prototype.setItem = function (key, value) {
        if (!this.isEnabled)
            return false;
        try {
            localStorage.setItem(key, JSON.stringify(value));
            return true;
        }
        catch (e) {
            return false;
        }
    };
    LocalStorageCacheService.prototype.getItem = function (key) {
        if (!this.isEnabled)
            return undefined;
        var value = localStorage.getItem(key);
        return value ? JSON.parse(value) : undefined;
    };
    LocalStorageCacheService.prototype.removeItem = function (key, wild) {
        if (wild === void 0) { wild = false; }
        if (!this.isEnabled)
            return;
        localStorage.removeItem(key);
        if (wild)
            try {
                for (var _a = __values(this.keys), _b = _a.next(); !_b.done; _b = _a.next()) {
                    var item = _b.value;
                    if (item.indexOf(key) === 0)
                        localStorage.removeItem(item);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);
                }
                finally { if (e_1) throw e_1.error; }
            }
        var e_1, _c;
    };
    LocalStorageCacheService.prototype.clear = function () {
        if (!this.isEnabled)
            return;
        localStorage.clear();
    };
    LocalStorageCacheService.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] }
    ]; };
    return LocalStorageCacheService;
}());

var MemoryCacheService = (function () {
    function MemoryCacheService(platformId) {
        this.platformId = platformId;
        if (!this.isEnabled)
            throw new Error('MemoryCacheService is not supported outside `browser` platform!');
        this.memoryStorage = new Map();
    }
    Object.defineProperty(MemoryCacheService.prototype, "isEnabled", {
        get: function () {
            return isPlatformBrowser(this.platformId);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MemoryCacheService.prototype, "keys", {
        get: function () {
            if (!this.isEnabled)
                return undefined;
            return Array.from(this.memoryStorage.keys());
        },
        enumerable: true,
        configurable: true
    });
    MemoryCacheService.prototype.setItem = function (key, value) {
        if (!this.isEnabled)
            return false;
        this.memoryStorage.set(key, value);
        return true;
    };
    MemoryCacheService.prototype.getItem = function (key) {
        if (!this.isEnabled)
            return undefined;
        return this.memoryStorage.get(key);
    };
    MemoryCacheService.prototype.removeItem = function (key, wild) {
        if (wild === void 0) { wild = false; }
        if (!this.isEnabled)
            return;
        this.memoryStorage.delete(key);
        if (wild)
            try {
                for (var _a = __values(this.keys), _b = _a.next(); !_b.done; _b = _a.next()) {
                    var item = _b.value;
                    if (item.indexOf(key) === 0)
                        this.memoryStorage.delete(item);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);
                }
                finally { if (e_1) throw e_1.error; }
            }
        var e_1, _c;
    };
    MemoryCacheService.prototype.clear = function () {
        if (!this.isEnabled)
            return;
        this.memoryStorage.clear();
    };
    MemoryCacheService.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] }
    ]; };
    return MemoryCacheService;
}());

var BrowserCacheModule = (function () {
    function BrowserCacheModule(parentModule, transferState, cache) {
        this.transferState = transferState;
        this.cache = cache;
        if (parentModule)
            throw new Error('BrowserCacheModule already loaded; import in BROWSER module only.');
        var serverCache = this.getCacheValue();
        cache.rehydrate(serverCache);
    }
    BrowserCacheModule.forRoot = function (configuredProviders) {
        return {
            ngModule: BrowserCacheModule,
            providers: configuredProviders
        };
    };
    BrowserCacheModule.prototype.getCacheValue = function () {
        var stateKey = makeStateKey(this.cache.key);
        var state = this.transferState.get(stateKey, {});
        if (state)
            try {
                var serverCache = JSON.parse(state);
                this.transferState.remove(stateKey);
                return serverCache;
            }
            catch (e) { }
        return {};
    };
    BrowserCacheModule.decorators = [
        { type: NgModule },
    ];
    BrowserCacheModule.ctorParameters = function () { return [
        { type: BrowserCacheModule, decorators: [{ type: Optional }, { type: SkipSelf }] },
        { type: TransferState },
        { type: CacheService }
    ]; };
    return BrowserCacheModule;
}());

export { BrowserCacheModule, LocalStorageCacheService, MemoryCacheService };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWNhY2hlLXBsYXRmb3JtLWJyb3dzZXIuanMubWFwIiwic291cmNlcyI6WyJuZzovL0BuZ3gtY2FjaGUvcGxhdGZvcm0tYnJvd3Nlci9zcmMvbG9jYWwtc3RvcmFnZS1jYWNoZS5zZXJ2aWNlLnRzIiwibmc6Ly9Abmd4LWNhY2hlL3BsYXRmb3JtLWJyb3dzZXIvc3JjL21lbW9yeS1jYWNoZS5zZXJ2aWNlLnRzIiwibmc6Ly9Abmd4LWNhY2hlL3BsYXRmb3JtLWJyb3dzZXIvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYW5ndWxhclxyXG5pbXBvcnQgeyBpc1BsYXRmb3JtQnJvd3NlciB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7IEluamVjdCwgUExBVEZPUk1fSUQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbi8vIGxpYnNcclxuaW1wb3J0IHsgQ2FjaGUsIENhY2hlVmFsdWUgfSBmcm9tICdAbmd4LWNhY2hlL2NvcmUnO1xyXG5cclxuZXhwb3J0IGNsYXNzIExvY2FsU3RvcmFnZUNhY2hlU2VydmljZSBpbXBsZW1lbnRzIENhY2hlIHtcclxuICBwcml2YXRlIGdldCBpc0VuYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICBpZiAoIWlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVzdCcsICd0ZXN0Jyk7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0ZXN0Jyk7XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSByZWFkb25seSBwbGF0Zm9ybUlkOiBhbnkpIHtcclxuICAgIGlmICghaXNQbGF0Zm9ybUJyb3dzZXIocGxhdGZvcm1JZCkpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignTG9jYWxTdG9yYWdlQ2FjaGVTZXJ2aWNlIGlzIG5vdCBzdXBwb3J0ZWQgb3V0c2lkZSBgYnJvd3NlcmAgcGxhdGZvcm0hJyk7XHJcbiAgfVxyXG5cclxuICBnZXQga2V5cygpOiBBcnJheTxzdHJpbmc+IHtcclxuICAgIGlmICghdGhpcy5pc0VuYWJsZWQpXHJcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3QgcmVzOiBBcnJheTxzdHJpbmc+ID0gW107XHJcblxyXG4gICAgT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKVxyXG4gICAgICAuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IHtcclxuICAgICAgICByZXMucHVzaChrZXkpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IENhY2hlVmFsdWUpOiBib29sZWFuIHtcclxuICAgIGlmICghdGhpcy5pc0VuYWJsZWQpXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0SXRlbShrZXk6IHN0cmluZyk6IENhY2hlVmFsdWUge1xyXG4gICAgaWYgKCF0aGlzLmlzRW5hYmxlZClcclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdCB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlID8gSlNPTi5wYXJzZSh2YWx1ZSkgOiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICByZW1vdmVJdGVtKGtleTogc3RyaW5nLCB3aWxkID0gZmFsc2UpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5pc0VuYWJsZWQpXHJcbiAgICAgIHJldHVybjtcclxuXHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG5cclxuICAgIGlmICh3aWxkKVxyXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5rZXlzKVxyXG4gICAgICAgIGlmIChpdGVtLmluZGV4T2Yoa2V5KSA9PT0gMClcclxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIoKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuaXNFbmFibGVkKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIGFuZ3VsYXJcclxuaW1wb3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBJbmplY3QsIFBMQVRGT1JNX0lEIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG4vLyBsaWJzXHJcbmltcG9ydCB7IENhY2hlLCBDYWNoZVZhbHVlIH0gZnJvbSAnQG5neC1jYWNoZS9jb3JlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNZW1vcnlDYWNoZVNlcnZpY2UgaW1wbGVtZW50cyBDYWNoZSB7XHJcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IG1lbW9yeVN0b3JhZ2U6IE1hcDxzdHJpbmcsIENhY2hlVmFsdWU+O1xyXG5cclxuICBwcml2YXRlIGdldCBpc0VuYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKEBJbmplY3QoUExBVEZPUk1fSUQpIHByaXZhdGUgcmVhZG9ubHkgcGxhdGZvcm1JZDogYW55KSB7XHJcbiAgICBpZiAoIXRoaXMuaXNFbmFibGVkKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01lbW9yeUNhY2hlU2VydmljZSBpcyBub3Qgc3VwcG9ydGVkIG91dHNpZGUgYGJyb3dzZXJgIHBsYXRmb3JtIScpO1xyXG5cclxuICAgIHRoaXMubWVtb3J5U3RvcmFnZSA9IG5ldyBNYXA8c3RyaW5nLCBDYWNoZVZhbHVlPigpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGtleXMoKTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICBpZiAoIXRoaXMuaXNFbmFibGVkKVxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG5cclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubWVtb3J5U3RvcmFnZS5rZXlzKCkpO1xyXG4gIH1cclxuXHJcbiAgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IENhY2hlVmFsdWUpOiBib29sZWFuIHtcclxuICAgIGlmICghdGhpcy5pc0VuYWJsZWQpXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB0aGlzLm1lbW9yeVN0b3JhZ2Uuc2V0KGtleSwgdmFsdWUpO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXRlbShrZXk6IHN0cmluZyk6IENhY2hlVmFsdWUge1xyXG4gICAgaWYgKCF0aGlzLmlzRW5hYmxlZClcclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5tZW1vcnlTdG9yYWdlLmdldChrZXkpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlSXRlbShrZXk6IHN0cmluZywgd2lsZCA9IGZhbHNlKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuaXNFbmFibGVkKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgdGhpcy5tZW1vcnlTdG9yYWdlLmRlbGV0ZShrZXkpO1xyXG5cclxuICAgIGlmICh3aWxkKVxyXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5rZXlzKVxyXG4gICAgICAgIGlmIChpdGVtLmluZGV4T2Yoa2V5KSA9PT0gMClcclxuICAgICAgICAgIHRoaXMubWVtb3J5U3RvcmFnZS5kZWxldGUoaXRlbSk7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5pc0VuYWJsZWQpXHJcbiAgICAgIHJldHVybjtcclxuXHJcbiAgICB0aGlzLm1lbW9yeVN0b3JhZ2UuY2xlYXIoKTtcclxuICB9XHJcbn1cclxuIiwiLy8gYW5ndWxhclxyXG5pbXBvcnQgeyBNb2R1bGVXaXRoUHJvdmlkZXJzLCBOZ01vZHVsZSwgT3B0aW9uYWwsIFNraXBTZWxmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IG1ha2VTdGF0ZUtleSwgVHJhbnNmZXJTdGF0ZSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xyXG5cclxuLy8gbGlic1xyXG5pbXBvcnQgeyBDYWNoZVNlcnZpY2UgfSBmcm9tICdAbmd4LWNhY2hlL2NvcmUnO1xyXG5cclxuLy8gbW9kdWxlXHJcbmV4cG9ydCAqIGZyb20gJy4vc3JjL2xvY2FsLXN0b3JhZ2UtY2FjaGUuc2VydmljZSc7XHJcbmV4cG9ydCAqIGZyb20gJy4vc3JjL21lbW9yeS1jYWNoZS5zZXJ2aWNlJztcclxuXHJcbkBOZ01vZHVsZSgpXHJcbmV4cG9ydCBjbGFzcyBCcm93c2VyQ2FjaGVNb2R1bGUge1xyXG4gIHN0YXRpYyBmb3JSb290KGNvbmZpZ3VyZWRQcm92aWRlcnM/OiBBcnJheTxhbnk+KTogTW9kdWxlV2l0aFByb3ZpZGVycyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuZ01vZHVsZTogQnJvd3NlckNhY2hlTW9kdWxlLFxyXG4gICAgICBwcm92aWRlcnM6IGNvbmZpZ3VyZWRQcm92aWRlcnNcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnRNb2R1bGU6IEJyb3dzZXJDYWNoZU1vZHVsZSxcclxuICAgICAgICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHRyYW5zZmVyU3RhdGU6IFRyYW5zZmVyU3RhdGUsXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjYWNoZTogQ2FjaGVTZXJ2aWNlKSB7XHJcbiAgICBpZiAocGFyZW50TW9kdWxlKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jyb3dzZXJDYWNoZU1vZHVsZSBhbHJlYWR5IGxvYWRlZDsgaW1wb3J0IGluIEJST1dTRVIgbW9kdWxlIG9ubHkuJyk7XHJcblxyXG4gICAgY29uc3Qgc2VydmVyQ2FjaGUgPSB0aGlzLmdldENhY2hlVmFsdWUoKTtcclxuICAgIGNhY2hlLnJlaHlkcmF0ZShzZXJ2ZXJDYWNoZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldENhY2hlVmFsdWUoKTogYW55IHtcclxuICAgIGNvbnN0IHN0YXRlS2V5ID0gbWFrZVN0YXRlS2V5KHRoaXMuY2FjaGUua2V5KTtcclxuICAgIGNvbnN0IHN0YXRlID0gdGhpcy50cmFuc2ZlclN0YXRlLmdldDxhbnk+KHN0YXRlS2V5LCB7fSk7XHJcblxyXG4gICAgaWYgKHN0YXRlKVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHNlcnZlckNhY2hlID0gSlNPTi5wYXJzZShzdGF0ZSk7XHJcbiAgICAgICAgdGhpcy50cmFuc2ZlclN0YXRlLnJlbW92ZTxhbnk+KHN0YXRlS2V5KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlcnZlckNhY2hlO1xyXG4gICAgICB9IGNhdGNoIChlKSB7LyoqL31cclxuXHJcbiAgICByZXR1cm4ge307XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJ0c2xpYl8xLl9fdmFsdWVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0lBc0JFLGtDQUFrRCxVQUFlO1FBQWYsZUFBVSxHQUFWLFVBQVUsQ0FBSztRQUMvRCxJQUFJLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDO1lBQ2hDLE1BQU0sSUFB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